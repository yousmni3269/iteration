Iteration and List Columns
================
Soomin You
2024-10-29

Settings

Load key packages.

``` r
library(tidyverse)
library(rvest)
```

    ## 
    ## Attaching package: 'rvest'

    ## The following object is masked from 'package:readr':
    ## 
    ##     guess_encoding

## Here’s some lists

``` r
l = list(
  vec_numeric = 1:4, 
  unif_sample = runif(100), 
  mat = matrix(1:8, nrow = 2, ncol = 4, byrow = TRUE), 
  summary = summary(rnorm(1000))
)

l
```

    ## $vec_numeric
    ## [1] 1 2 3 4
    ## 
    ## $unif_sample
    ##   [1] 0.25127740 0.75970816 0.50789440 0.25825160 0.64574532 0.42186118
    ##   [7] 0.72628044 0.72288883 0.85636439 0.89758826 0.37165967 0.60710669
    ##  [13] 0.52010312 0.83698836 0.08932596 0.06068661 0.20181999 0.51265912
    ##  [19] 0.46919411 0.88810296 0.95456300 0.76029771 0.96157501 0.41824041
    ##  [25] 0.16356819 0.30213043 0.66718536 0.74114842 0.92923437 0.53298512
    ##  [31] 0.14286554 0.16704067 0.88934093 0.27441970 0.79884842 0.89970179
    ##  [37] 0.17040038 0.74119204 0.09241548 0.95629647 0.06752485 0.66960964
    ##  [43] 0.06071882 0.50856102 0.76594811 0.51663187 0.41931828 0.64222722
    ##  [49] 0.85912366 0.49243823 0.34498910 0.67913122 0.84159596 0.37785999
    ##  [55] 0.61433066 0.97685260 0.72901283 0.28262744 0.33647866 0.28902843
    ##  [61] 0.86215929 0.91847339 0.01111027 0.65770446 0.16997267 0.24482381
    ##  [67] 0.08800870 0.02806294 0.57547433 0.68808862 0.57694109 0.42548774
    ##  [73] 0.55756761 0.57464019 0.99462356 0.81530079 0.70816133 0.73521440
    ##  [79] 0.23746474 0.03867414 0.07267589 0.09361251 0.63648474 0.38372659
    ##  [85] 0.65390672 0.06618585 0.95542178 0.61920152 0.85104106 0.10023907
    ##  [91] 0.28986330 0.50146848 0.64656211 0.04805568 0.07403960 0.16277704
    ##  [97] 0.58974135 0.86303223 0.54717120 0.13112761
    ## 
    ## $mat
    ##      [,1] [,2] [,3] [,4]
    ## [1,]    1    2    3    4
    ## [2,]    5    6    7    8
    ## 
    ## $summary
    ##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
    ## -3.318687 -0.677215  0.006813  0.005327  0.701218  3.650660

``` r
l$mat
```

    ##      [,1] [,2] [,3] [,4]
    ## [1,]    1    2    3    4
    ## [2,]    5    6    7    8

``` r
l[["mat"]][1,3]
```

    ## [1] 3

``` r
l[[1]]
```

    ## [1] 1 2 3 4

``` r
l[[4]]
```

    ##      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
    ## -3.318687 -0.677215  0.006813  0.005327  0.701218  3.650660

Make a list that’s hopefully a bit more useful.

``` r
list_norm = 
  list(
    a = rnorm(20, 0, 5), 
    b = rnorm(20, 4, 5), 
    c = rnorm(20, 0, 10), 
    d = rnorm(20, 4, 10)
  )

list_norm[["b"]]
```

    ##  [1]  0.9209012 -5.5745897  3.9515350  5.1055976 -3.1627484  4.2558101
    ##  [7]  1.6505474  0.7773865  8.0526295  7.7479826  4.8723188  3.9467526
    ## [13]  7.6532693 -2.3175574 -4.6942131  8.5413695  2.8383021 12.5707393
    ## [19] -3.1705197  7.3210502

Let’s reuse teh function we wrote the last time.

``` r
mean_and_sd = function(x) {
  
  mean_x = mean(x)
  sd_x = sd(x)
  
  out_df = 
    tibble(
      mean = mean_x,
      sd = sd_x 
    )
  
  return(out_df)
  
}
```

Let’s use teh function to take mean and sd of all samples.

``` r
mean_and_sd(list_norm[["a"]])
```

    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1 -1.07  6.06

``` r
mean_and_sd(list_norm[["b"]])
```

    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  3.06  4.97

``` r
mean_and_sd(list_norm[["c"]])
```

    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1 -2.96  7.18

``` r
mean_and_sd(list_norm[["d"]])
```

    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  2.29  8.54

## Use a for loop

Create a output list, and run a for loop

``` r
output = vector("list", length = 4)

for (i in 1:4) {
  
  output[[i]] = mean_and_sd(list_norm[[i]])
  
}

output
```

    ## [[1]]
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1 -1.07  6.06
    ## 
    ## [[2]]
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  3.06  4.97
    ## 
    ## [[3]]
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1 -2.96  7.18
    ## 
    ## [[4]]
    ## # A tibble: 1 × 2
    ##    mean    sd
    ##   <dbl> <dbl>
    ## 1  2.29  8.54
